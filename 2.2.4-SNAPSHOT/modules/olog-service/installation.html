<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia Site Renderer 1.3 at Sep 24, 2013 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Olog-service - Installation</title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
      <meta name="author" content="Eric Berryman" />
    <meta name="Date-Revision-yyyymmdd" content="20130924" />
    <meta http-equiv="Content-Language" content="en" />
        
        </head>
  <body class="composite">
    <div id="banner">
                        <a href="http://sourceforge.net/projects/olog/" id="bannerLeft">
                Olog
                </a>
                    <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
            
                <div class="xleft">
        <span id="publishDate">Last Published: 2013-09-24</span>
                  &nbsp;| <span id="projectVersion">Version: 2.2.4-SNAPSHOT</span>
                      </div>
            <div class="xright">                    <a href="http://www.aps.anl.gov/epics/" class="externalLink" title="EPICS">EPICS</a>
              
            
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
            
                                <h5>Olog-service</h5>
                  <ul>
                  <li class="none">
                          <a href="index.html" title="Overview">Overview</a>
            </li>
                  <li class="none">
                          <a href="download.html" title="Download">Download</a>
            </li>
                  <li class="none">
            <strong>Installation</strong>
          </li>
          </ul>
                       <h5>Project Documentation</h5>
                  <ul>
                                                                                                                                                                                                                                                                          <li class="collapsed">
                          <a href="project-info.html" title="Project Information">Project Information</a>
                  </li>
                                                                                                        <li class="collapsed">
                          <a href="project-reports.html" title="Project Reports">Project Reports</a>
                  </li>
          </ul>
                                                                                                                               <a href="https://openepics.ci.cloudbees.com/" title="Cloudbees" class="poweredBy">
        <img class="poweredBy"  alt="Cloudbees" src="http://web-static-cloudfront.s3.amazonaws.com/images/badges/BuiltOnDEV.png"     />
      </a>
                                                                                                                <a href="http://maven.apache.org/" title="Maven" class="poweredBy">
        <img class="poweredBy"  alt="Maven" src="http://maven.apache.org/images/logos/maven-feather.png"     />
      </a>
                       
            
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <div class="section"><h2>Installation<a name="Installation"></a></h2><p>Olog is a Java EE5 REST-style web service. The directory data is held in a relational database, and authentication/authorization info as well as the user/group relations are taken from an LDAP server or Unix &quot;id&quot;.</p><div class="section"><h3>Prerequisites<a name="Prerequisites"></a></h3><ul><li>Glassfish v3 application server</li><li>SQL database with JDBC driver, e.g. mySQL</li><li>LDAP server, e.g. OpenLDAP or unix &quot;id&quot;</li></ul></div><div class="section"><h3>Installation Process<a name="Installation_Process"></a></h3><div class="section"><h4>Install Glassfish v3<a name="Install_Glassfish_v3"></a></h4><p>Download and install Glassfish v3 from <a class="externalLink" href="https://glassfish.dev.java.net/public/downloadsindex.html">java.net</a> following the instructions for your platform.</p></div><div class="section"><h4>Install mySQL and JDBC Drivers<a name="Install_mySQL_and_JDBC_Drivers"></a></h4><ul><li>If your site is running a mySQL server, you can skip the next step, and have the database manager create the olog tables and user for you.</li><li>Download and install mySQL from <a class="externalLink" href="http://www.mysql.com/downloads/mysql/">MySQL.com</a> following the instructions for your platform.<br /><i>Alternatively:</i> Install the mySQL server from your distribution using a package manager.</li><li>Create the olog tables using the <tt>sql/olog.sql</tt> script in the distribution tar. Unless you are running the mySQL server locally on your machine with access restricted to localhost, it is strongly advisable to create a user for the Olog service and give it sufficient rights on the olog database. Having the Olog service access the database as root is a possible security hole.</li><li>Download the JDBC driver from <a class="externalLink" href="http://www.mysql.com/downloads/connector/j/">MySQL.com</a>. Extract the driver <tt>mysql-connector-java-&lt;n&gt;.&lt;n&gt;.&lt;n&gt;-bin.jar</tt> from the archive and drop it into <tt>GLASSFISH_HOME/lib</tt>.</li></ul></div><div class="section"><h4>Create the Database Connection<a name="Create_the_Database_Connection"></a></h4><ul><li>Start your Glassfish application server (through Netbeans or by running <tt>asadmin start-domain domain1</tt> (<tt>asadmin.bat</tt> on Windows) inside <tt>GLASSFISH_HOME/bin</tt>.</li><li>Login to the Glassfish admin console (default: http://localhost:4848). The default user and password are &quot;admin&quot; / &quot;adminadmin&quot;.</li><li>Open &quot;Common Tasks&quot; / &quot;Resources&quot; / &quot;JDBC&quot; / &quot;Connection Pools&quot;.</li><li>Create a new Connection Pool called &quot;OlogPool&quot;, selecting &quot;javax.sql.ConnectionPoolDataSource&quot; as your &quot;Resource Type&quot; and &quot;MySQL&quot; as &quot;Database vendor&quot;.</li><li>Fill in the details according to your mySQL installation. Minimum are:<ul><li>Server Name (e.g. &quot;localhost&quot;)</li><li>Database Name (&quot;olog&quot;)</li><li>User Name (for access to olog, as set in mySQL)</li><li>Password (for that user name, as set in mySQL)</li></ul></li><li>After finishing, click on the Connection Pool you just created. If you configured the pool correctly, clicking &quot;Ping&quot; will return a &quot;Ping Succeeded&quot; message.</li><li>Open &quot;Common Tasks&quot; / &quot;Resources&quot; / &quot;JDBC&quot; / &quot;JDBC Resources&quot;.</li><li>Create a new JNDI resource called &quot;jdbc/olog&quot;, selecting the Connection Pool you just created.</li></ul></div><div class="section"><h4>Install an LDAP Server<a name="Install_an_LDAP_Server"></a></h4><ul><li>If your site is running an LDAP server, you can skip the next step, and have the LDAP manager show you the structure and how to query it.</li><li>Download and install slapd from <a class="externalLink" href="http://www.openldap.org/">OpenLDAP.org</a> following the instructions for your platform.<br /><i>Alternatively:</i> Install the slapd daemon from your distribution using a package manager.</li><li>Set up users and groups. The <tt>ldif/cftest.ldif</tt> file in the distribution shows the LDAP entries I create to run the integration tests. That should give you an idea about the structures that Olog expects.</li></ul></div><div class="section"><h4>Create the LDAP Connection for Authentication/Authorization<a name="Create_the_LDAP_Connection_for_AuthenticationAuthorization"></a></h4><ul><li>Login to the Glassfish admin console.</li><li>Open &quot;Common Tasks&quot; / &quot;Configuration&quot; / &quot;Security&quot; / &quot;Realms&quot;.</li><li>Create a new realm called &quot;olog&quot;, setting the &quot;Class Name&quot; to &quot;com.sun.enterprise.security.auth.realm.ldap.LDAPRealm&quot;, and the &quot;JAAS Context&quot; to &quot;ldapRealm&quot;. &quot;Directory&quot; and &quot;Base DN&quot; should reflect your LDAP configuration. (My integration tests use &quot;ldap://localhost:389&quot; as &quot;Directory&quot; and &quot;dc=cf-test,dc=bnl,dc=gov&quot; as &quot;Base DN&quot; which connects to a slapd on localhost that has loaded the definitions from <tt>cftest.ldif</tt>.</li><li>Add a property called &quot;group-search-filter&quot; with the value &quot;memberUid=%s&quot; to make authentication work using the usual posixGroup definitions in the LDAP server.</li></ul></div><div class="section"><h4>Create the LDAP Connection for Testing Group Membership<a name="Create_the_LDAP_Connection_for_Testing_Group_Membership"></a></h4><ul><li>Login to the Glassfish admin console.</li><li>Open &quot;Common Tasks&quot; / &quot;Resources&quot; / &quot;JNDI&quot; / &quot;Custom Resources&quot;.</li><li>Create a new resource called &quot;ologGroups&quot;, setting the &quot;Resource Type&quot; to &quot;javax.naming.directory.Directory&quot;, and the &quot;Factory Class&quot; to &quot;com.sun.jndi.ldap.LdapCtxFactory&quot;.</li><li>Add two additional properties &quot;URL&quot; and &quot;javax.naming.security.principal&quot; reflecting your LDAP configuration. (My integration test use &quot;URL&quot; = &quot;ldap://localhost/dc=cf-test,dc=bnl,dc=gov&quot; and &quot;javax.naming.security.principal&quot; = &quot;cn=olog,dc=nsls2,dc=bnl,dc=gov&quot;.)</li></ul></div><div class="section"><h4>Deploy the Olog Application<a name="Deploy_the_Olog_Application"></a></h4><ul><li>Drop the Olog WAR file <tt>war/olog-service.war</tt> into <tt>GLASSFISH_HOME/domains/domain1/autodeploy</tt>. (You may have to create the autodeploy directory if it doesn't exist yet.)<br /><i>Alternatively:</i> Call <tt>asadmin deploy &lt;WAR-file</tt>&gt; (<tt>asadmin.bat</tt> on Windows) inside <tt>GLASSFISH_HOME/bin</tt>.</li></ul></div></div><div class="section"><h3>Checking the Installation<a name="Checking_the_Installation"></a></h3><div class="section"><h4>Using a Browser<a name="Using_a_Browser"></a></h4><p>Once deployed, Olog should be listening for requests.</p><p>For a Glassfish default installation on localhost, a list of all logs in your database, try pointing your browser to &quot;http://localhost:8080/Olog/resources/logs&quot;.</p></div><div class="section"><h4>Using a Generic Client<a name="Using_a_Generic_Client"></a></h4><p>For in-depth testing of the service, I recommend using the <a class="externalLink" href="http://code.google.com/p/rest-client/">rest-client</a> application, that allows a complete detailed specification of a request and its payload, giving a lot more options than using a browser.</p></div></div></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
              Copyright &#169;                    2010-2013
                      Michigan State University.
            All Rights Reserved.      
            
                  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
